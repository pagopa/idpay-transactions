server:
  port: ${TRANSACTIONS_PORT:8080}

spring:
  application:
    name: idpay-transactions
  config:
    activate:
      on-profile: default
  cloud:
    stream:
      function:
        definition: rewardTrxConsumer
      bindings:
        rewardTrxConsumer-in-0:
          destination: ${KAFKA_TOPIC_TRANSACTION:}
          group: ${KAFKA_IDPAY_GROUP:}
          content-type: ${KAFKA_CONTENT_TYPE:application/json}
          binder: kafka
      kafka:
        binder:
          auto-create-topics: ${KAFKA_TRANSACTIONS_BINDER_AUTO_CREATE_TOPIC:false}
          brokers: ${KAFKA_BINDER_BROKER_ENDPOINT_REWARD_TRX:}
          configuration:
            heartbeat.interval.ms: ${KAFKA_TRANSACTIONS_BINDER_CONFIGURATION_HEARTBEAT_INTERVAL_MS:30000}
            session.timeout.ms: ${KAFKA_TRANSACTIONS_BINDER_CONFIGURATION_SESSION_TIMEOUT_MS:60000}
            sasl:
              jaas:
                config: ${EVH_CONNECTION_REWARD_RESPONSE:}
              mechanism: ${KAFKA_TRANSACTIONS_SASL_MECHANISM:PLAIN}
            security:
              protocol: ${KAFKA_TRANSACTIONS_SECURITY_PROTOCOL:SASL_SSL}
          consumerProperties:
            socket:
              connection:
                setup:
                  timeout:
                    max:
                      ms: ${KAFKA_TRANSACTIONS_CONNECTION_TIMEOUT_MAX_MS:200000}
                    ms: ${KAFKA_TRANSACTIONS_CONNECTION_TIMEOUT_MS:100000}
            connections:
              max:
                idle:
                  ms: ${KAFKA_TRANSACTIONS_CONNECTIONS_MAX_IDLE_MS:300000}
  data:
    mongodb:
      uri: ${MONGODB_URI}
      database: ${MONGODB_DBNAME:idpay}

logging:
  level:
    root: ${LOG_LEVEL_ROOT:INFO}
    it.gov.pagopa: ${LOG_LEVEL_PAGOPA:INFO}
    it.gov.pagopa.idpay: ${LOG_LEVEL_IDPAY:INFO}
    org.springframework.integration: ${LOG_LEVEL_SPRING_INTEGRATION:INFO}
    org.springframework.security: ${LOG_LEVEL_SPRING_SECURITY:INFO}
    org.springframework.ws: ${LOG_LEVEL_SPRING_WS:INFO}
    org.springframework.cloud: ${LOG_LEVEL_SPRING_CLOUD:WARN}
    org.springframework.data: ${LOG_LEVEL_SPRING_DATA:INFO}
    org.springframework.hateoas: ${LOG_LEVEL_SPRING_HATEOAS:INFO}
    org.springframework.boot: ${LOG_LEVEL_SPRING_BOOT:INFO}
    org.springframework.kafka: ${LOG_LEVEL_SPRING_KAFKA:INFO}
    org.springframework.batch: ${LOG_LEVEL_SPRING_BATCH:INFO}
    io.swagger: ${LOG_LEVEL_IO_SWAGGER:WARN}
    javax.persistence: ${LOG_LEVEL_JAVAX_PERSISTENCE:INFO}
    org.hibernate: ${LOG_LEVEL_ORG_HIBERNATE:INFO}
    org.kie: ${LOG_LEVEL_ORG_KIE:WARN}
    org.drools: ${LOG_LEVEL_ORG_DROOLS:WARN}
    org.mongodb.driver: ${LOG_LEVEL_MONGODB_DRIVER:WARN}